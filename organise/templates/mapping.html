{% extends "base.html" %}

{% block head %}
    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAO6HriBeLor-J1y181ISFHRRBHR5lYO8U-LtfefBb7h4fe04OYRQgWKDlOw51iLZiSkrH4tWEMVj2TQ"
      type="text/javascript"></script>
    <script type="text/javascript">

    //<![CDATA[

    function load() {
      if (GBrowserIsCompatible()) {
        var map = new GMap2(document.getElementById("map"));
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());
        map.setCenter(new GLatLng(53.7419, -1.5419), 5);
		map.enableInfoWindow();
		
		{% for point in points %}
			var point = new GLatLng({{point.latitude}}, {{point.longitude}});
         	map.addOverlay(new GMarker(point));
		{% endfor %}
      }
    }


	$(document).ready(function()
		{
			load();
		}
	);
		
    //]]>
    </script>
{% endblock %}

{% block content %}

	<h2>Subscriber Plot</h2>
	
	<p>Here we attempt to plot where all the nice people that have signed up are.</p>

    <div id="map" style="width:500px;height:600px"></div>

	{% if missing %}
		<p>Despite the best efforts of our trained research lobsters, {{missing}} subscribers are still unaccounted for.</p>
	{% endif %}

{% endblock %}